!function(x){function M(t){return F(y.utils.fromWei(F(t).toFixed(),"ether")).toFixed(5,1)}function u(t){return 10<t.length?t.substring(0,5)+"..."+t.substr(-5):t}function e(t,n){t.eth.net.getId(function(t,e){1!=e?b("please select mainnet."):(m=!0,f(),T(),"function"==typeof n&&n())})}function n(){window.setInterval(function(){y.eth.getAccounts(function(t,e){if(null==t)if(0!=e.length||""==c){if(0!=e.length){var n=e[0].toLowerCase();n!=c&&(c=n,window.location.reload())}}else window.location.reload();else console.log("error")})},1e3)}var a,i,o,s,k,t,l,p=[{constant:!1,inputs:[],name:"bootstrap",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_referrer",type:"address"}],name:"play",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_referrer_",type:"address"}],name:"publicReferral",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"receive",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"receiveReward",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"settle",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{constant:!0,inputs:[],name:"genPlayerRemain",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getCurrentRoundInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_addr",type:"address"}],name:"getExtInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_rID",type:"uint256"}],name:"getHisRoundInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_addr",type:"address"}],name:"getPlayerInfo",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_pAddress",type:"address"},{name:"_referrer",type:"address"}],name:"getRefLimit",outputs:[{name:"",type:"bool"},{name:"",type:"bool"},{name:"",type:"bool"},{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isHavePlayer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"playerRnds",outputs:[{name:"refEths",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"remainTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"round",outputs:[{name:"end",type:"uint256"},{name:"strt",type:"uint256"},{name:"eth",type:"uint256"},{name:"pot",type:"uint256"},{name:"ended",type:"bool"},{name:"maxRefEths",type:"uint256"},{name:"maxRefEthsAddress",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"Ticket",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],r=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_val",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"activate",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_val",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"round",outputs:[{name:"inva",type:"address"},{name:"end",type:"uint256"},{name:"strt",type:"uint256"},{name:"eth",type:"uint256"},{name:"pot",type:"uint256"},{name:"ended",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"remainTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_addr",type:"address"}],name:"getPlayerInfo",outputs:[{name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getExtInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_addr",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getCurrentRoundInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"receive",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_val",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"Game",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_rID",type:"uint256"}],name:"getHisRoundInfo",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"address"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"exchange",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}],F=BigNumber.clone(),m=!1,y=window.web3,c="",d=(t=new RegExp("(^|&)r=([^&]*)(&|$)"),null!=(l=window.location.search.substr(1).match(t))?unescape(l[2]):l||"0x0000000000000000000000000000000000000000"),f=function(){a=new y.eth.Contract(p,"0x2e63b6d7eF8fC8A2ea4C96bB9a633423682f0F79"),i=new y.eth.Contract(r,"0x1D3e8bc3D670F0c01Ed560E60E7449CFe37618Fd")},b=function(t){x.message({message:t,type:"error",duration:3e3,showClose:!1,center:!1})};!function(){var t,e=store.get("language");for(var n in t=(t=e&&"undefined"!=e&&""!=e.trim()?language_json[e]:language_json.en)||language_json.en)x("."+n).text(t[n])}();x(".language-item").click(function(){store.set("language",x(this).attr("language-value")),window.location.reload()});function h(){return y?m?!(!c||""==c)||void b("unload account."):(b("error net."),!1):(b("no web3."),!1)}new ClipboardJS(".lb-copy-action",{text:function(){return x(".ref-link0").html()}}).on("success",function(t){var e;t.clearSelection(),e="copy success. "+t.text,x.message({message:e,type:"success",duration:3e3,showClose:!1,center:!1})});var w,v,g,I=function(t,e,n){if(n&&t&&-1==F(t).comparedTo(F(e).times(F(n))))return F(e).times(F(n)).toFixed();return 0},R=function(){""!=c&&a&&i&&(function(){var t=location.href;-1!=t.indexOf("?")&&(t=t.split("?")[0]);var e=c;if(e){var n=10<e.length?e.substring(0,5)+"..."+e.substr(-5):e;"-"==x(".ref-link").html().trim()&&x(".ref-link").html(t+"?r="+n),"-"==x(".ref-link0").html().trim()&&x(".ref-link0").html(t+"?r="+e)}}(),a.methods.getPlayerInfo(c).call(_),a.methods.getExtInfo(c).call(function(t,e){if(!t){var n=e[0],a=e[1],i=e[2],o=e[3],s=M(e[4]);x(".ref-qty").html(n),x(".ref-er").html(u(a)),x(".g-v3size").html(F(i).minus(1).toFixed()),x(".g-poitsize").html(F(o).minus(1).toFixed()),x(".g-v3pool").html(s)}}),i.methods.getPlayerInfo(c).call(function(t,e){var n=M(e[2]);x(".p-tokenReward").html(n)}),i.methods.balanceOf(c).call(function(t,e){s=y.utils.fromWei(F(e).toFixed(),"ether"),x(".e-tokenBalanceOf").html(s)}),y.utils.isAddress(d)&&"0x0000000000000000000000000000000000000000"!=d?a.methods.getRefLimit(c,d).call(function(t,e){var n,a=e[0],i=e[1],o=e[2],s=e[3];a?n="Exists referrer.":i?n="Referrer not join.":o?n="Already become a referrer.":s&&(n="The referrer has already been out"),n?(x(".input-refer").html("<span style='color:red;font-weight:bold;'>"+u(d)+"</span>"),x(".input-refer-warn").html(n)):x(".input-refer").html("<span style='color:green;font-weight:bold;'>"+u(d)+"</span>")}):x(".input-refer").html("/"))},_=function(t,e){if(!t){x(".p-gen").html(M(e[0])),x(".p-dy").html(M(e[1])),x(".p-win").html(M(e[2])),x(".p-fixResCount").html(M(e[3])),x(".p-tdy").html(M(e[4])),x(".p-t").html(M(e[5]));var n=M(e[6]),a=M(e[7]),i=M(e[8]),o=e[9],s=e[10],u=F(e[11]).toFixed(),l=F(e[12]).toFixed(),p=F(e[13]).toFixed(),r=F(e[14]).toFixed(),m=F(e[15]).toFixed(),y=F(e[16]).toFixed(),c=M(e[17]),d=M(e[18]),f=M(e[19]),b=F(e[20]).toFixed(),h=M(e[21]),w=F(e[22]).toFixed(),v=M(F(e[0]).plus(F(e[1])).plus(F(e[2]))),g=M(F(e[7]).plus(F(e[8])).plus(F(e[21])));k=M(e[23]),x(".p-incomeLimit").html(n),x(".p-vreward").html(a),x(".p-poitreward").html(i),x(".p-v3reward").html(h),x(".p-level").html(o),x(".p-v").html(s),x(".p-v3").html(2==u?"Yes":"No"),x(".p-poit").html(2==l?"Yes":"No"),x(".p-bus").html(r),x(".p-busline1").html(m),x(".p-busline2").html(y),x(".p-busline3").html(w),x(".p-unsettlemin").html(c),x(".p-unsettlemax").html(d),x(".p-refeths").html(f),0<b?(x(".p-days").html(b),x(".p-days").css("display","inline")):x(".p-days").css("display","none"),x(".p-unwithdrawreward").html(g),x(".p-unwithdraw").html(v),C(p)}},C=function(t){0<t?(v&&v.clear(),(v=new Tick(t,".p-nextIncomeTime")).timer(v)):x(".p-nextIncomeTime").html("00:00:00")},T=function(){a&&(a.methods.getCurrentRoundInfo().call(function(t,e){if(!t){e[0];var n=M(e[1]),a=M(e[2]),i=M(e[3]),o=u(e[4]);x(".rg-qty").html(n),x(".rg-award").html(i),x(".rg-address").html(o),x(".rg-refeths").html(a)}}),a.methods.remainTime().call(function(t,e){var n;t||(0<(n=F(e).toFixed())?(g&&g.clear(),(g=new Tick(n,".rg-remaintime")).timer(g)):x(".rg-remaintime").html("00:00:00"))}),a.methods.getHisRoundInfo(0).call(function(t,e){if(!t){var n=M(e[2]),a=M(e[3]),i=u(e[4]);x(".e-his-rg-reward").html(a),x(".e-his-rg-addr").html(i),x(".e-his-rg-refeths").html(n)}})),i&&(i.methods.getCurrentRoundInfo().call(function(t,e){if(!t){e[0];var n=M(e[1]),a=u(e[2]),i=M(e[3]);x(".rt-qty").html(n),x(".rt-award").html(i),x(".rt-address").html(a)}}),i.methods.remainTime().call(function(t,e){var n;t||(0<(n=F(e).toFixed())?(w&&w.clear(),(w=new Tick(n,".rt-remaintime")).timer(w)):x(".rt-remaintime").html("00:00:00"))}),i.methods.getHisRoundInfo(0).call(function(t,e){if(!t){var n=u(e[2]),a=M(e[3]);x(".e-his-rt-reward").html(a),x(".e-his-rt-addr").html(n)}}),i.methods.getExtInfo().call(function(t,e){var n=M(e[0]),a=F(e[1]).div(1e4).toFixed();o=F(e[2]).div(1e4).toFixed(),x(".e-tdestroy").html(n),x(".e-extpercent").html(a),x(".e-burntimes").html(o)}),i.methods.symbol().call(function(t,e){t?b(t):(tokensymbol=e,x(".e-tokensymol").html(tokensymbol))}))};x(".lb-buytoken-action").click(function(){if(h()){var t=x("#input-buytoken").val();if(t){var e,n=y.utils.toWei(t,"ether");e=n,i.methods.exchange().send({from:c,value:e,gas:3e5},function(t,e){t&&b(t.message)})}else b("please confirm input")}}),x(".lb-play-action").click(function(){if(h()){var t=x("#input-play").val();if(t){if(parseFloat(t)<1)b("min join aount 1 ETH");else if(k&&0<k&&parseFloat(k)>parseFloat(t))b("sorry, must >= "+k+" eth");else if(function(t){var e;if(s&&o)return 0==(e=I(s,t,o))||(b("token not enough,need token "+e),!1);b("data loading...")}(t)){var e,n=y.utils.toWei(t,"ether");e=n,d?a.methods.play(d).send({from:c,value:e,gas:12e5},function(t,e){t&&b(t.message)}):b("referrer error.")}}else b("please confirm input")}}),x(".settle-action").click(function(){if(h()){var t=x(".p-unsettlemin").html();!t||t<.001?b("unsettled amount < 0.001"):a&&a.methods.settle().send({from:c,gas:8e5},function(t,e){t&&b(t.message)})}}),x("#widthdray-for-common").click(function(){h()&&(x(".p-unwithdraw").html()<.01?b("can't withdraw util withdraw account >= 0.01"):a&&a.methods.receive().send({from:c,gas:25e4},function(t,e){t&&b(t.message)}))}),x("#widthdray-for-tpool").click(function(){h()&&(x(".p-tokenReward").html()<.01?b("can't withdraw util withdraw account >= 0.01"):i&&i.methods.receive().send({from:c,gas:25e4},function(t,e){t&&b(t.message)}))}),x("#widthdray-for-reward").click(function(){h()&&(x(".p-unwithdrawreward").html()<.01?b("can't withdraw util withdraw account >= 0.01"):a&&a.methods.receiveReward().send({from:c,gas:2e5},function(t,e){t&&b(t.message)}))}),x(":radio").click(function(){x("#input-play").val(x(this).val())}),x("a.tag").click(function(){x(this).addClass("active").siblings().removeClass("active");var t=x(this).index();x(this).parent().parent().parent().children().eq(t+1).addClass("active").siblings().removeClass("active")}),window.ethereum?(y=window.web3=new Web3(ethereum),ethereum.enable().then(function(t){0!=t.length?(c=t[0].toLowerCase(),e(window.web3,function(){R(),n()})):b("no account selected!")}).catch(function(t){return b(t),!1})):window.web3?(y=window.web3=new Web3(y.currentProvider),e(window.web3,function(){y.eth.getAccounts(function(t,e){t?b(t):0!=e.length?(c=e[0].toLowerCase(),R()):b("")}),n()})):b("please download imtoken or metamask or trustwallet..."),setInterval(function(){T()},1e4),setInterval(function(){R()},15e3)}(jQuery);
